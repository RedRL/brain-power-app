"use strict";(self.webpackChunkbrain_power=self.webpackChunkbrain_power||[]).push([[9797],{9797:(F,u,g)=>{g.r(u),g.d(u,{MemoryGameComponent:()=>D});var h=g(177),f=g(3025),v=g(9112),e=g(4438),m=g(70),b=g(5096),_=g(8490);function w(a,l){1&a&&e.nrm(0,"div",13),2&a&&e.xc7("background-color",l.$implicit.color)}function x(a,l){if(1&a&&(e.j41(0,"div",11),e.DNE(1,w,1,2,"div",12),e.k0s()),2&a){const t=l.$implicit;e.R7$(),e.Y8G("ngForOf",t)}}function M(a,l){if(1&a&&(e.j41(0,"div",5)(1,"div",6)(2,"h2"),e.EFF(3),e.nI1(4,"t"),e.k0s(),e.j41(5,"p",7),e.EFF(6),e.nI1(7,"t"),e.j41(8,"strong"),e.EFF(9),e.k0s(),e.EFF(10),e.nI1(11,"t"),e.k0s()(),e.j41(12,"div",8),e.DNE(13,x,2,1,"div",9),e.k0s(),e.j41(14,"p",10),e.EFF(15),e.nI1(16,"t"),e.k0s()()),2&a){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,8,"memorize_pattern")),e.R7$(3),e.SpI("",e.bMT(7,10,"pattern_will_hide_in")," "),e.R7$(3),e.JRh(t.getRemainingViewTime()),e.R7$(),e.SpI(" ",e.bMT(11,12,"seconds"),""),e.R7$(2),e.xc7("grid-template-columns","repeat("+t.gridCols+", 1fr)"),e.R7$(),e.Y8G("ngForOf",t.patternGrid),e.R7$(2),e.JRh(e.bMT(16,14,"watch_carefully_pattern"))}}function C(a,l){if(1&a&&e.nrm(0,"div",20),2&a){const t=l.$implicit,i=l.index,o=e.XpG().index;e.xc7("background-color",t.color||"#2a2a2a"),e.AVh("filled",t.isPlaced),e.BMQ("data-row",o)("data-col",i)}}function P(a,l){if(1&a&&(e.j41(0,"div",11),e.DNE(1,C,1,6,"div",19),e.k0s()),2&a){const t=l.$implicit;e.R7$(),e.Y8G("ngForOf",t)}}function E(a,l){if(1&a){const t=e.RV6();e.j41(0,"div",21),e.bIt("mousedown",function(o){const n=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.onPieceMouseDown(o,n))})("touchstart",function(o){const n=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.onPieceTouchStart(o,n))}),e.k0s()}if(2&a){const t=l.$implicit,i=e.XpG(2);e.xc7("background-color",t.color)("cursor","playing"===i.phase?"grab":"not-allowed"),e.BMQ("draggable",!1)}}function y(a,l){if(1&a&&(e.j41(0,"div",5)(1,"div",6)(2,"h2"),e.EFF(3),e.nI1(4,"t"),e.k0s(),e.j41(5,"p",10),e.EFF(6),e.nI1(7,"t"),e.k0s()(),e.j41(8,"div",14)(9,"div",15),e.EFF(10),e.nI1(11,"t"),e.k0s(),e.j41(12,"div",8),e.DNE(13,P,2,1,"div",9),e.k0s()(),e.j41(14,"div",16)(15,"div",15),e.EFF(16),e.nI1(17,"t"),e.k0s(),e.j41(18,"div",17),e.DNE(19,E,1,5,"div",18),e.k0s()()()),2&a){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,13,"recreate_pattern")),e.R7$(3),e.JRh(e.bMT(7,15,"drag_pieces_to_grid")),e.R7$(4),e.JRh(e.bMT(11,17,"your_pattern")),e.R7$(2),e.xc7("grid-template-columns","repeat("+t.gridCols+", 1fr)"),e.AVh("grid-4-col",4===t.gridCols),e.R7$(),e.Y8G("ngForOf",t.userGrid),e.R7$(3),e.JRh(e.bMT(17,19,"available_pieces")),e.R7$(2),e.AVh("grid-2-col",2===t.gridCols),e.R7$(),e.Y8G("ngForOf",t.availablePieces)("ngForTrackBy",t.trackByPieceId)}}function T(a,l){if(1&a){const t=e.RV6();e.j41(0,"div",22)(1,"div",23)(2,"div",24),e.EFF(3,"\u{1f389}"),e.k0s(),e.j41(4,"h2"),e.EFF(5),e.nI1(6,"t"),e.k0s(),e.j41(7,"p",25),e.EFF(8),e.nI1(9,"t"),e.k0s(),e.j41(10,"div",26)(11,"div",27)(12,"span",28),e.EFF(13),e.nI1(14,"t"),e.k0s(),e.j41(15,"span",29),e.EFF(16),e.nI1(17,"number"),e.k0s()(),e.j41(18,"div",27)(19,"span",28),e.EFF(20),e.nI1(21,"t"),e.k0s(),e.j41(22,"span",29),e.EFF(23),e.k0s()()(),e.j41(24,"div",30)(25,"button",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.restartGame())}),e.EFF(26),e.nI1(27,"t"),e.k0s(),e.j41(28,"button",32),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.goBack())}),e.EFF(29),e.nI1(30,"t"),e.k0s()()()()}if(2&a){const t=e.XpG();e.R7$(5),e.JRh(e.bMT(6,8,"congratulations")),e.R7$(3),e.JRh(e.bMT(9,10,"pattern_matched")),e.R7$(5),e.SpI("",e.bMT(14,12,"time"),":"),e.R7$(3),e.SpI("",e.i5U(17,14,t.completionTime/1e3,"1.1-1"),"s"),e.R7$(4),e.SpI("",e.bMT(21,17,"score"),":"),e.R7$(3),e.JRh(t.score),e.R7$(3),e.SpI(" ",e.bMT(27,19,"play_again")," "),e.R7$(3),e.SpI(" ",e.bMT(30,21,"back_to_activities")," ")}}function O(a,l){if(1&a){const t=e.RV6();e.j41(0,"div",33)(1,"div",23)(2,"div",24),e.EFF(3,"\u{1f614}"),e.k0s(),e.j41(4,"h2"),e.EFF(5),e.nI1(6,"t"),e.k0s(),e.j41(7,"p",34),e.EFF(8),e.nI1(9,"t"),e.k0s(),e.j41(10,"div",30)(11,"button",31),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.restartGame())}),e.EFF(12),e.nI1(13,"t"),e.k0s(),e.j41(14,"button",32),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.goBack())}),e.EFF(15),e.nI1(16,"t"),e.k0s()()()()}2&a&&(e.R7$(5),e.JRh(e.bMT(6,4,"not_quite_right")),e.R7$(3),e.JRh(e.bMT(9,6,"pattern_mismatch")),e.R7$(4),e.SpI(" ",e.bMT(13,8,"try_again")," "),e.R7$(3),e.SpI(" ",e.bMT(16,10,"back_to_activities")," "))}let D=(()=>{class a{constructor(t,i,o,n){this.router=t,this.route=i,this.translateService=o,this.dataService=n,this.level="beginner",this.phase="viewing",this.gridSize=2,this.gridRows=2,this.gridCols=2,this.viewDuration=5e3,this.patternGrid=[],this.userGrid=[],this.availablePieces=[],this.draggedPiece=null,this.isDragging=!1,this.dragOffset={x:0,y:0},this.draggedElement=null,this.dragStartTimer=null,this.dragStarted=!1,this.mouseDownPosition={x:0,y:0},this.currentDropZone=null,this.boundMouseMove=null,this.boundMouseUp=null,this.boundTouchMove=null,this.boundTouchEnd=null,this.remainingSeconds=0,this.colors=["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F","#BB8FCE","#85C1E2"],this.startTime=0,this.completionTime=0,this.score=0}ngOnInit(){this.route.queryParams.subscribe(t=>{this.level=t.level||"beginner",this.initializeGame()})}ngAfterViewInit(){setTimeout(()=>{this.updateDraggableAttributes()},100)}updateDraggableAttributes(){requestAnimationFrame(()=>{document.querySelectorAll(".draggable-piece").forEach(i=>{const o=i;"playing"===this.phase?(o.setAttribute("draggable","false"),o.style.cursor="grab"):(o.setAttribute("draggable","false"),o.style.cursor="not-allowed")})})}ngOnDestroy(){this.viewTimer&&clearTimeout(this.viewTimer),this.countdownInterval&&clearInterval(this.countdownInterval),this.dragStartTimer&&clearTimeout(this.dragStartTimer),this.boundMouseMove&&document.removeEventListener("mousemove",this.boundMouseMove,!0),this.boundMouseUp&&document.removeEventListener("mouseup",this.boundMouseUp,!0),this.boundTouchMove&&document.removeEventListener("touchmove",this.boundTouchMove,!0),this.boundTouchEnd&&document.removeEventListener("touchend",this.boundTouchEnd,!0),this.draggedElement&&this.draggedElement.remove()}initializeGame(){switch(this.level){case"beginner":this.gridRows=2,this.gridCols=2,this.viewDuration=5e3;break;case"advanced":this.gridRows=2,this.gridCols=3,this.viewDuration=1e4;break;case"grand":this.gridRows=2,this.gridCols=4,this.viewDuration=15e3}this.generatePattern(),this.initializeUserGrid(),this.generateAvailablePieces(),this.startViewingPhase()}generatePattern(){this.patternGrid=[];const t=[];let i;switch(this.level){case"beginner":i=["#E74C3C","#3498DB","#2ECC71","#FF9800"];break;case"advanced":i=["#E74C3C","#3498DB","#2ECC71","#FF9800","#9B59B6","#F1C40F"];break;case"grand":i=["#E74C3C","#3498DB","#2ECC71","#FF9800","#9B59B6","#F1C40F","#E91E63","#00BCD4"];break;default:i=this.colors}for(let s=0;s<this.gridRows;s++){this.patternGrid[s]=[];for(let c=0;c<this.gridCols;c++){const d=i[Math.floor(Math.random()*i.length)];t.push(d),this.patternGrid[s][c]={row:s,col:c,color:d,isPlaced:!0}}}const o=[...new Set(t)],r=Math.min(3,this.gridRows*this.gridCols);o.length<r&&this.generatePattern()}initializeUserGrid(){this.userGrid=[];for(let t=0;t<this.gridRows;t++){this.userGrid[t]=[];for(let i=0;i<this.gridCols;i++)this.userGrid[t][i]={row:t,col:i,color:"",isPlaced:!1}}}generateAvailablePieces(){const t=[];this.patternGrid.forEach(o=>{o.forEach(n=>{t.push(n.color)})});const i=[...new Set(t)];this.availablePieces=[],i.forEach((o,n)=>{this.availablePieces.push({id:n,color:o,isUsed:!1})}),"beginner"!==this.level&&this.colors.filter(n=>!i.includes(n)).slice(0,2).forEach((n,r)=>{this.availablePieces.push({id:i.length+r,color:n,isUsed:!1})}),this.availablePieces=this.shuffleArray([...this.availablePieces])}shuffleArray(t){const i=[...t];for(let o=i.length-1;o>0;o--){const n=Math.floor(Math.random()*(o+1));[i[o],i[n]]=[i[n],i[o]]}return i}startViewingPhase(){this.phase="viewing",this.startTime=Date.now(),this.remainingSeconds=Math.ceil(this.viewDuration/1e3),this.countdownInterval=setInterval(()=>{this.remainingSeconds--,this.remainingSeconds<=0&&(clearInterval(this.countdownInterval),this.countdownInterval=null)},1e3),this.viewTimer=setTimeout(()=>{this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null),this.phase="playing",this.viewTimer=null,this.remainingSeconds=0,setTimeout(()=>{this.updateDraggableAttributes()},100)},this.viewDuration)}trackByPieceId(t,i){return i.id}onPieceMouseDown(t,i){if(0!==t.button||"playing"!==this.phase)return;t.preventDefault(),t.stopPropagation(),this.draggedPiece=i,this.dragStarted=!1,this.mouseDownPosition={x:t.clientX,y:t.clientY};const o=t.currentTarget;o&&(o.classList.add("press-hold"),this.boundMouseMove=n=>this.onMouseMove(n),this.boundMouseUp=n=>this.onMouseUp(n),document.addEventListener("mousemove",this.boundMouseMove,!0),document.addEventListener("mouseup",this.boundMouseUp,!0),this.dragStartTimer=setTimeout(()=>{o.classList.remove("press-hold"),this.startDraggingMouse(t,o)},300))}onPieceTouchStart(t,i){if("playing"!==this.phase)return;t.preventDefault(),t.stopPropagation();const o=t.touches[0];if(!o)return;this.draggedPiece=i,this.dragStarted=!1,this.mouseDownPosition={x:o.clientX,y:o.clientY};const n=t.currentTarget;n&&(n.classList.add("press-hold"),this.boundTouchMove=r=>this.onTouchMove(r),this.boundTouchEnd=r=>this.onTouchEnd(r),document.addEventListener("touchmove",this.boundTouchMove,{passive:!1,capture:!0}),document.addEventListener("touchend",this.boundTouchEnd,!0),this.dragStartTimer=setTimeout(()=>{n.classList.remove("press-hold"),this.startDraggingTouch(o,n)},300))}startDraggingMouse(t,i){if(!this.draggedPiece)return;this.isDragging=!0,this.dragStarted=!0,this.draggedElement=i.cloneNode(!0),this.draggedElement.style.position="fixed",this.draggedElement.style.pointerEvents="none",this.draggedElement.style.zIndex="10000",this.draggedElement.style.opacity="0.8",this.draggedElement.style.transform="scale(1.2)",this.draggedElement.style.cursor="grabbing",this.draggedElement.querySelectorAll("*").forEach(r=>{r.style.pointerEvents="none"});const n=i.getBoundingClientRect();this.dragOffset.x=this.mouseDownPosition.x-n.left,this.dragOffset.y=this.mouseDownPosition.y-n.top,this.draggedElement.style.left=this.mouseDownPosition.x-this.dragOffset.x+"px",this.draggedElement.style.top=this.mouseDownPosition.y-this.dragOffset.y+"px",this.draggedElement.style.width=n.width+"px",this.draggedElement.style.height=n.height+"px",document.body.appendChild(this.draggedElement),i.style.opacity="0.5"}startDraggingTouch(t,i){if(!this.draggedPiece)return;this.isDragging=!0,this.dragStarted=!0,this.draggedElement=i.cloneNode(!0),this.draggedElement.style.position="fixed",this.draggedElement.style.pointerEvents="none",this.draggedElement.style.zIndex="10000",this.draggedElement.style.opacity="0.8",this.draggedElement.style.transform="scale(1.2)",this.draggedElement.style.cursor="grabbing",this.draggedElement.querySelectorAll("*").forEach(r=>{r.style.pointerEvents="none"});const n=i.getBoundingClientRect();this.dragOffset.x=t.clientX-n.left,this.dragOffset.y=t.clientY-n.top,this.draggedElement.style.left=t.clientX-this.dragOffset.x+"px",this.draggedElement.style.top=t.clientY-this.dragOffset.y+"px",this.draggedElement.style.width=n.width+"px",this.draggedElement.style.height=n.height+"px",document.body.appendChild(this.draggedElement),i.style.opacity="0.5"}onMouseMove(t){if(!this.isDragging&&this.draggedPiece)return void(Math.sqrt(Math.pow(t.clientX-this.mouseDownPosition.x,2)+Math.pow(t.clientY-this.mouseDownPosition.y,2))>10&&this.cancelDrag());if(!this.isDragging||!this.draggedElement)return;t.preventDefault(),this.draggedElement.style.left=t.clientX-this.dragOffset.x+"px",this.draggedElement.style.top=t.clientY-this.dragOffset.y+"px";const i=document.querySelectorAll(".drop-zone");let o=null;i.forEach(n=>{const r=n.getBoundingClientRect();t.clientX>=r.left&&t.clientX<=r.right&&t.clientY>=r.top&&t.clientY<=r.bottom&&(o=n)}),o!==this.currentDropZone&&(this.currentDropZone&&this.currentDropZone.classList.remove("drag-over"),null!==o&&o.classList.add("drag-over"),this.currentDropZone=o)}onTouchMove(t){const i=t.touches[0];if(!i)return;if(!this.isDragging&&this.draggedPiece)return void(Math.sqrt(Math.pow(i.clientX-this.mouseDownPosition.x,2)+Math.pow(i.clientY-this.mouseDownPosition.y,2))>10&&this.cancelDrag());if(!this.isDragging||!this.draggedElement)return;t.preventDefault(),this.draggedElement.style.left=i.clientX-this.dragOffset.x+"px",this.draggedElement.style.top=i.clientY-this.dragOffset.y+"px";const o=document.querySelectorAll(".drop-zone");let n=null;o.forEach(r=>{const s=r.getBoundingClientRect();i.clientX>=s.left&&i.clientX<=s.right&&i.clientY>=s.top&&i.clientY<=s.bottom&&(n=r)}),n!==this.currentDropZone&&(this.currentDropZone&&this.currentDropZone.classList.remove("drag-over"),null!==n&&n.classList.add("drag-over"),this.currentDropZone=n)}cancelDrag(){this.dragStartTimer&&(clearTimeout(this.dragStartTimer),this.dragStartTimer=null),document.querySelectorAll(".draggable-piece.press-hold").forEach(t=>{t.classList.remove("press-hold")}),this.boundMouseMove&&(document.removeEventListener("mousemove",this.boundMouseMove,!0),this.boundMouseMove=null),this.boundMouseUp&&(document.removeEventListener("mouseup",this.boundMouseUp,!0),this.boundMouseUp=null),this.boundTouchMove&&(document.removeEventListener("touchmove",this.boundTouchMove,!0),this.boundTouchMove=null),this.boundTouchEnd&&(document.removeEventListener("touchend",this.boundTouchEnd,!0),this.boundTouchEnd=null),this.draggedPiece=null,this.dragStarted=!1,this.isDragging=!1}onMouseUp(t){if(t.preventDefault(),this.dragStartTimer&&(clearTimeout(this.dragStartTimer),this.dragStartTimer=null),document.querySelectorAll(".draggable-piece.press-hold").forEach(o=>{o.classList.remove("press-hold")}),this.boundMouseMove&&(document.removeEventListener("mousemove",this.boundMouseMove,!0),this.boundMouseMove=null),this.boundMouseUp&&(document.removeEventListener("mouseup",this.boundMouseUp,!0),this.boundMouseUp=null),!this.dragStarted||!this.isDragging)return this.draggedPiece=null,this.dragStarted=!1,void(this.isDragging=!1);if(this.draggedElement&&(this.draggedElement.remove(),this.draggedElement=null),document.querySelectorAll(".draggable-piece").forEach(o=>{"0.5"===o.style.opacity&&(o.style.opacity="1")}),this.draggedPiece){const o=document.querySelectorAll(".drop-zone");let n=null;if(o.forEach(r=>{const s=r.getBoundingClientRect();t.clientX>=s.left&&t.clientX<=s.right&&t.clientY>=s.top&&t.clientY<=s.bottom&&(n=r)}),null!==n){const r=n;r.classList.remove("drag-over");const s=parseInt(r.getAttribute("data-row")||"0"),c=parseInt(r.getAttribute("data-col")||"0");this.userGrid[s][c].color=this.draggedPiece.color,this.userGrid[s][c].isPlaced=!0,this.userGrid=[...this.userGrid],this.availablePieces=[...this.availablePieces],setTimeout(()=>{this.updateDraggableAttributes()},0),this.checkCompletion()}}this.currentDropZone&&(this.currentDropZone.classList.remove("drag-over"),this.currentDropZone=null),this.isDragging=!1,this.draggedPiece=null,this.dragStarted=!1}onTouchEnd(t){if(t.preventDefault(),this.dragStartTimer&&(clearTimeout(this.dragStartTimer),this.dragStartTimer=null),document.querySelectorAll(".draggable-piece.press-hold").forEach(n=>{n.classList.remove("press-hold")}),this.boundTouchMove&&(document.removeEventListener("touchmove",this.boundTouchMove,!0),this.boundTouchMove=null),this.boundTouchEnd&&(document.removeEventListener("touchend",this.boundTouchEnd,!0),this.boundTouchEnd=null),!this.dragStarted||!this.isDragging)return this.draggedPiece=null,this.dragStarted=!1,void(this.isDragging=!1);const i=t.changedTouches[0];if(i){if(this.draggedElement&&(this.draggedElement.remove(),this.draggedElement=null),document.querySelectorAll(".draggable-piece").forEach(n=>{"0.5"===n.style.opacity&&(n.style.opacity="1")}),this.draggedPiece){const n=document.querySelectorAll(".drop-zone");let r=null;if(n.forEach(s=>{const c=s.getBoundingClientRect();i.clientX>=c.left&&i.clientX<=c.right&&i.clientY>=c.top&&i.clientY<=c.bottom&&(r=s)}),null!==r){const s=r;s.classList.remove("drag-over");const c=parseInt(s.getAttribute("data-row")||"0"),d=parseInt(s.getAttribute("data-col")||"0");this.userGrid[c][d].color=this.draggedPiece.color,this.userGrid[c][d].isPlaced=!0,this.userGrid=[...this.userGrid],this.availablePieces=[...this.availablePieces],setTimeout(()=>{this.updateDraggableAttributes()},0),this.checkCompletion()}}this.currentDropZone&&(this.currentDropZone.classList.remove("drag-over"),this.currentDropZone=null),this.isDragging=!1,this.draggedPiece=null,this.dragStarted=!1}else this.cancelDrag()}onDragStart(t,i){return i.preventDefault(),!1}onDragEnd(t){}onDragEnter(t,i,o){t.preventDefault(),t.stopPropagation();const n=t.currentTarget;n&&n.classList.contains("drop-zone")&&!this.userGrid[i][o].isPlaced&&n.classList.add("drag-over")}onDragLeave(t,i,o){t.preventDefault();const n=t.currentTarget;n&&n.classList.contains("drop-zone")&&n.classList.remove("drag-over")}onDragOver(t,i,o){t.preventDefault(),t.stopPropagation(),t.dataTransfer&&(t.dataTransfer.dropEffect=this.userGrid[i][o].isPlaced?"none":"move");const n=t.currentTarget;n&&n.classList.contains("drop-zone")&&n.classList.add("drag-over")}onDrop(t,i,o){t.preventDefault(),t.stopPropagation();const n=t.currentTarget;n&&n.classList.remove("drag-over");let r=this.draggedPiece;if(!r&&t.dataTransfer)try{const s=t.dataTransfer.getData("application/json");if(s){const c=JSON.parse(s),d=this.availablePieces.find(p=>p.id===c.id);d&&(r=d)}}catch{const c=parseInt(t.dataTransfer.getData("text/plain"));if(!isNaN(c)){const d=this.availablePieces.find(p=>p.id===c);d&&(r=d)}}!r||"playing"!==this.phase||(this.userGrid[i][o].color=r.color,this.userGrid[i][o].isPlaced=!0,this.draggedPiece=null,this.userGrid=[...this.userGrid],this.availablePieces=[...this.availablePieces],setTimeout(()=>{this.updateDraggableAttributes()},0),this.checkCompletion())}removePiece(t,i){"playing"!==this.phase||!this.userGrid[t][i].isPlaced||(this.userGrid[t][i].color="",this.userGrid[t][i].isPlaced=!1)}checkCompletion(){if(!this.userGrid.every(r=>r.every(s=>s.isPlaced)))return;let i=0;for(let r=0;r<this.gridRows;r++)for(let s=0;s<this.gridCols;s++)this.userGrid[r][s].color===this.patternGrid[r][s].color&&i++;const n=i/(this.gridRows*this.gridCols);1===n?(this.completionTime=Date.now()-this.startTime,this.score=Math.max(0,1e3-Math.floor(this.completionTime/100)),this.phase="completed",this.markAsCompleted()):n>=.7?(this.completionTime=Date.now()-this.startTime,this.score=Math.max(0,Math.floor(1e3*n-Math.floor(this.completionTime/100))),this.phase="completed",this.markAsCompleted()):this.phase="failed"}markAsCompleted(){const t=Math.floor(this.completionTime/1e3),i={date:(new Date).toISOString().split("T")[0],exerciseId:"memory",level:this.level,durationSec:t,score:this.score};this.dataService.addCompletion(i)}restartGame(){this.initializeGame()}goBack(){this.router.navigate(["/lets-begin"])}getRemainingViewTime(){return this.remainingSeconds}static{this.\u0275fac=function(i){return new(i||a)(e.rXU(m.Ix),e.rXU(m.nX),e.rXU(b.c),e.rXU(_.u))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-memory-game"]],standalone:!0,features:[e.aNF],decls:7,vars:7,consts:[[3,"title"],[1,"content"],["class","game-container",4,"ngIf"],["class","game-container completed",4,"ngIf"],["class","game-container failed",4,"ngIf"],[1,"game-container"],[1,"phase-header"],[1,"countdown"],[1,"pattern-grid"],["class","pattern-row",4,"ngFor","ngForOf"],[1,"instruction-text"],[1,"pattern-row"],["class","pattern-cell",3,"background-color",4,"ngFor","ngForOf"],[1,"pattern-cell"],[1,"user-grid-container"],[1,"grid-label"],[1,"pieces-container"],[1,"pieces-grid"],["class","draggable-piece",3,"background-color","cursor","mousedown","touchstart",4,"ngFor","ngForOf","ngForTrackBy"],["class","pattern-cell drop-zone",3,"filled","background-color",4,"ngFor","ngForOf"],[1,"pattern-cell","drop-zone"],[1,"draggable-piece",3,"mousedown","touchstart"],[1,"game-container","completed"],[1,"completion-card"],[1,"completion-icon"],[1,"success-message"],[1,"score-display"],[1,"score-item"],[1,"score-label"],[1,"score-value"],[1,"button-group"],[1,"btn-primary",3,"click"],[1,"btn-secondary",3,"click"],[1,"game-container","failed"],[1,"error-message"]],template:function(i,o){1&i&&(e.nrm(0,"app-header",0),e.nI1(1,"t"),e.j41(2,"section",1),e.DNE(3,M,17,16,"div",2)(4,y,20,21,"div",2)(5,T,31,23,"div",3)(6,O,17,12,"div",4),e.k0s()),2&i&&(e.Y8G("title",e.bMT(1,5,"memory_game_image_patterns")),e.R7$(3),e.Y8G("ngIf","viewing"===o.phase),e.R7$(),e.Y8G("ngIf","playing"===o.phase),e.R7$(),e.Y8G("ngIf","completed"===o.phase),e.R7$(),e.Y8G("ngIf","failed"===o.phase))},dependencies:[h.MD,h.Sq,h.bT,h.QX,f.y,v.Z],styles:[".content[_ngcontent-%COMP%]{padding:4vw clamp(12px,3vw,24px) clamp(12px,3vw,24px);max-width:min(800px,95vw);margin:3vw auto 0;min-height:calc(100vh - 100px);width:100%;box-sizing:border-box}.game-container[_ngcontent-%COMP%]{width:100%}.phase-header[_ngcontent-%COMP%]{text-align:center;margin-top:3vw;margin-bottom:clamp(16px,4vw,32px)}.phase-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:7vw;font-weight:800;color:#fff;margin:0 0 1.5vw;text-shadow:0 2px 4px rgba(0,0,0,.3)}.countdown[_ngcontent-%COMP%]{font-size:4.5vw;color:#ffffffe6;margin:0}.countdown[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:gold;font-size:5.5vw}.instruction-text[_ngcontent-%COMP%]{text-align:center;font-size:5.5vw;color:#fffc;margin:2.5vw 0}.pattern-grid[_ngcontent-%COMP%]{display:grid;gap:1.5vw;width:100%;max-width:min(400px,85vw);margin:0 auto clamp(20px,4vw,32px);padding:clamp(8px,2.5vw,16px);background:#0000004d;border-radius:clamp(10px,2.5vw,16px);backdrop-filter:blur(10px);box-sizing:border-box}.pattern-row[_ngcontent-%COMP%]{display:contents}.pattern-cell[_ngcontent-%COMP%]{aspect-ratio:1;width:100%;min-height:0;border-radius:clamp(6px,1.5vw,8px);border:clamp(2px,.5vw,3px) solid rgba(255,255,255,.2);transition:all .2s ease;display:flex;align-items:center;justify-content:center;position:relative;cursor:pointer;box-sizing:border-box}.pattern-cell[_ngcontent-%COMP%]:hover:not(.drop-zone){transform:scale(1.05);border-color:#fff6}.drop-zone[_ngcontent-%COMP%]{border:clamp(2px,.5vw,3px) dashed rgba(255,255,255,.3);user-select:none;-webkit-user-select:none;pointer-events:auto;cursor:default;transition:border-color .1s ease,border-width .1s ease,box-shadow .1s ease}.drop-zone.filled[_ngcontent-%COMP%]{border-style:solid;border-color:#fff6}.drop-zone.drag-over[_ngcontent-%COMP%]{border-color:gold!important;border-width:clamp(3px,.75vw,4px)!important;box-shadow:0 0 15px #ffd70066!important}.cell-number[_ngcontent-%COMP%]{font-size:4.5vw;color:#fff6;font-weight:700}.remove-hint[_ngcontent-%COMP%]{font-size:3.2vw;color:#fff9;text-align:center;padding:.75vw;display:none}.drop-zone.filled[_ngcontent-%COMP%]:hover   .remove-hint[_ngcontent-%COMP%]{display:block}.user-grid-container[_ngcontent-%COMP%]{margin-bottom:clamp(32px,5vw,48px)}.user-grid-container[_ngcontent-%COMP%]   .pattern-grid[_ngcontent-%COMP%]{max-width:min(320px,72vw)}.user-grid-container[_ngcontent-%COMP%]   .pattern-grid.grid-4-col[_ngcontent-%COMP%]{max-width:min(420px,82vw)}.grid-label[_ngcontent-%COMP%]{text-align:center;font-size:6vw;font-weight:700;color:#fff;margin-bottom:2.5vw;text-shadow:0 2px 4px rgba(0,0,0,.3)}.pieces-container[_ngcontent-%COMP%]{margin-top:clamp(24px,4vw,32px)}.pieces-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:2vw;justify-content:center;padding:clamp(16px,3vw,24px);background:#0000004d;border-radius:clamp(12px,2vw,16px);backdrop-filter:blur(10px);pointer-events:auto}.draggable-piece[_ngcontent-%COMP%]{width:clamp(40px,11vw,60px);height:clamp(40px,11vw,60px);min-width:40px;min-height:40px;flex-shrink:0;border-radius:clamp(8px,2vw,12px);border:clamp(2px,.5vw,3px) solid rgba(255,255,255,.3);cursor:grab;transition:all .2s ease;display:flex;align-items:center;justify-content:center;position:relative;box-shadow:0 4px 8px #0000004d;user-select:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-touch-callout:none;pointer-events:auto!important;touch-action:manipulation;box-sizing:border-box}.pieces-grid.grid-2-col[_ngcontent-%COMP%]   .draggable-piece[_ngcontent-%COMP%]{width:14.5vw!important;height:14.5vw!important;min-width:0!important;min-height:0!important}.draggable-piece[_ngcontent-%COMP%]:hover{transform:scale(1.1) translateY(-4px);border-color:#fff9;box-shadow:0 8px 16px #0006}.draggable-piece[_ngcontent-%COMP%]:active{cursor:grabbing!important;opacity:.8}.draggable-piece.press-hold[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pressHold .3s ease-out forwards}.draggable-piece[draggable=true][_ngcontent-%COMP%], .draggable-piece[draggable=true][_ngcontent-%COMP%]:hover{cursor:grab}.draggable-piece[draggable=true][_ngcontent-%COMP%]:active{cursor:grabbing!important}@keyframes _ngcontent-%COMP%_pressHold{0%{transform:scale(1)}50%{transform:scale(.95);border-color:#ffd700cc}to{transform:scale(1.05);border-color:gold;box-shadow:0 0 20px #ffd70080}}.piece-hint[_ngcontent-%COMP%]{font-size:3.2vw;color:#fffc;font-weight:700;text-shadow:0 1px 2px rgba(0,0,0,.5)}.completion-card[_ngcontent-%COMP%]{text-align:center;padding:6vw 4vw;background:#0006;border-radius:4vw;backdrop-filter:blur(10px);box-shadow:0 8px 32px #0000004d;max-width:min(600px,95vw);margin:0 auto;box-sizing:border-box}.completion-icon[_ngcontent-%COMP%]{font-size:15vw;margin-bottom:2.5vw}.completion-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:8.5vw;font-weight:800;color:#fff;margin:0 0 2.5vw;text-shadow:0 2px 4px rgba(0,0,0,.3)}.success-message[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]{font-size:5vw;color:#ffffffe6;margin:0 0 5vw}.error-message[_ngcontent-%COMP%]{color:#ff6b6b}.score-display[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:5vw;margin:clamp(24px,4vw,32px) 0;padding:clamp(16px,3vw,24px);background:#ffffff1a;border-radius:clamp(12px,2vw,16px);flex-wrap:wrap}.score-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1vw}.score-label[_ngcontent-%COMP%]{font-size:5.5vw;color:#ffffffb3}.score-value[_ngcontent-%COMP%]{font-size:7.5vw;font-weight:800;color:gold;text-shadow:0 2px 4px rgba(0,0,0,.3)}.button-group[_ngcontent-%COMP%]{display:flex;gap:2.5vw;justify-content:center;margin-top:clamp(24px,5vw,32px);flex-wrap:wrap}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{padding:2.5vw 4vw;border:none;border-radius:2vw;font-size:4.5vw;font-weight:700;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #0000004d;min-width:120px;flex:1 1 auto;max-width:300px;box-sizing:border-box}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#8b5cf6,#6d28d9);color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #8b5cf680}.btn-secondary[_ngcontent-%COMP%]{background:#ffffff1a;color:#fff;border:2px solid rgba(255,255,255,.3)}.btn-secondary[_ngcontent-%COMP%]:hover{background:#fff3;transform:translateY(-2px)}@media (max-width: 480px){.pattern-grid[_ngcontent-%COMP%]{max-width:95vw;padding:2vw;gap:1vw}.pattern-cell[_ngcontent-%COMP%]{min-height:50px}.draggable-piece[_ngcontent-%COMP%]{width:18vw;height:18vw;min-width:50px;min-height:50px}.pieces-grid.grid-2-col[_ngcontent-%COMP%]   .draggable-piece[_ngcontent-%COMP%]{width:14.5vw!important;height:14.5vw!important;min-width:0!important;min-height:0!important}.score-display[_ngcontent-%COMP%]{flex-direction:column;gap:20px}.button-group[_ngcontent-%COMP%]{flex-direction:column}.button-group[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%], .button-group[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{width:100%;max-width:100%}}@media (min-width: 481px) and (max-width: 768px){.pattern-grid[_ngcontent-%COMP%]{max-width:min(350px,80vw)}.draggable-piece[_ngcontent-%COMP%]{width:9vw;height:9vw}.pieces-grid.grid-2-col[_ngcontent-%COMP%]   .draggable-piece[_ngcontent-%COMP%]{width:14.5vw!important;height:14.5vw!important}}@media (max-width: 768px) and (orientation: landscape){.phase-header[_ngcontent-%COMP%]{margin-bottom:2vh}.pattern-grid[_ngcontent-%COMP%]{max-width:min(300px,50vw);margin-bottom:2vh}.user-grid-container[_ngcontent-%COMP%]{margin-bottom:3vh}.pieces-container[_ngcontent-%COMP%]{margin-top:2vh}.completion-card[_ngcontent-%COMP%]{padding:3vh 2vw}}@media (min-width: 1200px){.content[_ngcontent-%COMP%]{max-width:900px}.pattern-grid[_ngcontent-%COMP%]{max-width:450px}.draggable-piece[_ngcontent-%COMP%]{width:60px;height:60px}}"]})}}return a})()}}]);