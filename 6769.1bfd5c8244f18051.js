"use strict";(self.webpackChunkbrain_power=self.webpackChunkbrain_power||[]).push([[6769],{6769:(P,d,a)=>{a.r(d),a.d(d,{BreathingSessionComponent:()=>C});var l=a(177),g=a(3025),h=a(9112),e=a(4438),c=a(70),u=a(5096);const m=["breathingVideo"];function f(o,p){1&o&&(e.qSk(),e.j41(0,"svg",14),e.nrm(1,"path",25),e.k0s())}function _(o,p){1&o&&(e.qSk(),e.j41(0,"svg",14),e.nrm(1,"path",26),e.k0s())}function b(o,p){1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"t"),e.k0s()),2&o&&(e.R7$(),e.JRh(e.bMT(2,1,"play_video")))}function x(o,p){1&o&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"t"),e.k0s()),2&o&&(e.R7$(),e.JRh(e.bMT(2,1,"pause_video")))}function v(o,p){if(1&o){const t=e.RV6();e.j41(0,"div",27)(1,"div",28)(2,"div",29),e.EFF(3,"\u{1f389}"),e.k0s(),e.j41(4,"h2"),e.EFF(5),e.nI1(6,"t"),e.k0s(),e.j41(7,"p"),e.EFF(8),e.nI1(9,"t"),e.k0s(),e.j41(10,"button",30),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.goBack())}),e.EFF(11),e.nI1(12,"t"),e.k0s()()()}2&o&&(e.R7$(5),e.JRh(e.bMT(6,3,"congratulations")),e.R7$(3),e.JRh(e.bMT(9,5,"breathing_completed_message")),e.R7$(3),e.SpI(" ",e.bMT(12,7,"continue")," "))}let C=(()=>{class o{constructor(t,r,n){this.router=t,this.route=r,this.translateService=n,this.maxWatchedTime=0,this.currentTime=0,this.duration=0,this.progressPercentage=0,this.showCongratulations=!1,this.isPlaying=!1,this.isFullscreen=!1,this.videoType="youtube",this.videoUrl=""}ngOnInit(){this.route.queryParams.subscribe(t=>{this.videoType=t.type||"youtube",this.setVideoUrl()})}setVideoUrl(){switch(this.videoType){case"youtube":default:this.videoUrl="https://brain-power-app.s3.eu-north-1.amazonaws.com/videos/Chair+Yoga++Beginners+Breathwork+%26+Meditation+for+Seniors.mp4";break;case"ai-youtube":this.videoUrl="https://brain-power-app.s3.eu-north-1.amazonaws.com/videos/Sporty+Green-Haired+Breathing+Exercise+30sec.mp4.mp4";break;case"ai-video":this.videoUrl="https://brain-power-app.s3.eu-north-1.amazonaws.com/videos/Sporty+Redhead+Breathing+Exercise.mp4"}}onVideoLoaded(){this.duration=this.breathingVideo.nativeElement.duration,console.log("Video loaded. Duration:",this.duration)}onVideoError(t){console.error("Video error:",t),console.error("Error details:",t.target.error)}onTimeUpdate(){this.currentTime=this.breathingVideo.nativeElement.currentTime,this.currentTime>this.maxWatchedTime&&(this.maxWatchedTime=this.currentTime),this.progressPercentage=this.maxWatchedTime/this.duration*100,this.maxWatchedTime>=this.duration-1&&!this.showCongratulations&&(this.showCongratulations=!0,this.markBreathingSessionCompleted())}onPlay(){this.isPlaying=!0}onPause(){this.isPlaying=!1}togglePlayPause(){const t=this.breathingVideo.nativeElement;t.paused?t.play():t.pause()}rewind5Seconds(){const t=this.breathingVideo.nativeElement;t.currentTime=Math.max(0,t.currentTime-5)}toggleFullscreen(){const t=document.querySelector(".video-wrapper");document.fullscreenElement?document.exitFullscreen().then(()=>{this.isFullscreen=!1}):t.requestFullscreen().then(()=>{this.isFullscreen=!0})}markBreathingSessionCompleted(){const t=(new Date).toISOString().split("T")[0];localStorage.setItem("breathingSessionCompleted",t)}goBack(){this.router.navigate(["/lets-begin"])}static{this.\u0275fac=function(r){return new(r||o)(e.rXU(c.Ix),e.rXU(c.nX),e.rXU(u.c))}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-breathing-session"]],viewQuery:function(r,n){if(1&r&&e.GBs(m,5),2&r){let i;e.mGM(i=e.lsd())&&(n.breathingVideo=i.first)}},standalone:!0,features:[e.aNF],decls:40,vars:27,consts:[["videoContainer",""],["breathingVideo",""],[3,"title"],[1,"content"],[1,"video-wrapper"],[1,"progress-container"],[1,"progress-bar"],[1,"progress-fill"],[1,"progress-text"],[1,"video-frame"],["crossorigin","anonymous",1,"breathing-video",3,"timeupdate","loadedmetadata","play","pause","error","src"],[1,"custom-controls"],[1,"control-wrapper","rewind-wrapper"],["aria-label","Rewind 5 seconds",1,"control-btn",3,"click"],["width","32","height","32","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M12 5V1L7 6L12 11V7C15.31 7 18 9.69 18 13C18 16.31 15.31 19 12 19C8.69 19 6 16.31 6 13H4C4 17.42 7.58 21 12 21C16.42 21 20 17.42 20 13C20 8.58 16.42 5 12 5Z","fill","currentColor"],["x","12","y","16","text-anchor","middle","font-size","9","fill","currentColor","font-weight","bold"],[1,"tooltip","tooltip-left"],[1,"tooltip-arrow"],[1,"control-wrapper","play-wrapper"],[1,"control-btn",3,"click"],["width","32","height","32","viewBox","0 0 24 24","fill","none","xmlns","http://www.w3.org/2000/svg",4,"ngIf"],[1,"tooltip","tooltip-right"],[4,"ngIf"],["class","congratulations-overlay",4,"ngIf"],["d","M8 5V19L19 12L8 5Z","fill","currentColor"],["d","M6 4H10V20H6V4ZM14 4H18V20H14V4Z","fill","currentColor"],[1,"congratulations-overlay"],[1,"congratulations-card"],[1,"congrats-icon"],[1,"btn-primary",3,"click"]],template:function(r,n){if(1&r){const i=e.RV6();e.nrm(0,"app-header",2),e.nI1(1,"t"),e.j41(2,"section",3)(3,"div",4,0)(5,"div",5)(6,"div",6),e.nrm(7,"div",7),e.k0s(),e.j41(8,"div",8)(9,"span"),e.EFF(10),e.nI1(11,"t"),e.nI1(12,"number"),e.k0s()()(),e.j41(13,"div",9)(14,"video",10,1),e.bIt("timeupdate",function(){return e.eBV(i),e.Njj(n.onTimeUpdate())})("loadedmetadata",function(){return e.eBV(i),e.Njj(n.onVideoLoaded())})("play",function(){return e.eBV(i),e.Njj(n.onPlay())})("pause",function(){return e.eBV(i),e.Njj(n.onPause())})("error",function(w){return e.eBV(i),e.Njj(n.onVideoError(w))}),e.j41(16,"p"),e.EFF(17),e.nI1(18,"t"),e.k0s()()(),e.j41(19,"div",11)(20,"div",12)(21,"button",13),e.bIt("click",function(){return e.eBV(i),e.Njj(n.rewind5Seconds())}),e.qSk(),e.j41(22,"svg",14),e.nrm(23,"path",15),e.j41(24,"text",16),e.EFF(25,"5"),e.k0s()()(),e.joV(),e.j41(26,"div",17),e.nrm(27,"div",18),e.j41(28,"span"),e.EFF(29),e.nI1(30,"t"),e.k0s()()(),e.j41(31,"div",19)(32,"button",20),e.bIt("click",function(){return e.eBV(i),e.Njj(n.togglePlayPause())}),e.DNE(33,f,2,0,"svg",21)(34,_,2,0,"svg",21),e.k0s(),e.j41(35,"div",22),e.nrm(36,"div",18),e.DNE(37,b,3,3,"span",23)(38,x,3,3,"span",23),e.k0s()()()(),e.DNE(39,v,13,9,"div",24),e.k0s()}2&r&&(e.Y8G("title",e.bMT(1,16,"breathing_exercise")),e.R7$(7),e.xc7("width",n.progressPercentage,"%"),e.R7$(3),e.Lme("",e.bMT(11,18,"video_progress"),": ",e.i5U(12,20,n.progressPercentage,"1.0-0"),"%"),e.R7$(4),e.Y8G("src",n.videoUrl,e.B4B),e.R7$(3),e.JRh(e.bMT(18,23,"video_not_supported")),e.R7$(2),e.AVh("rtl","he"===n.translateService.lang),e.R7$(10),e.JRh(e.bMT(30,25,"rewind_5_seconds")),e.R7$(3),e.BMQ("aria-label",n.isPlaying?"Pause":"Play"),e.R7$(),e.Y8G("ngIf",!n.isPlaying),e.R7$(),e.Y8G("ngIf",n.isPlaying),e.R7$(3),e.Y8G("ngIf",!n.isPlaying),e.R7$(),e.Y8G("ngIf",n.isPlaying),e.R7$(),e.Y8G("ngIf",n.showCongratulations))},dependencies:[l.MD,l.bT,l.QX,g.y,h.Z],styles:[".content[_ngcontent-%COMP%]{padding:30px 40px;max-width:900px;margin:20px auto 0;height:100%}.video-wrapper[_ngcontent-%COMP%]{position:relative;background:#0000004d;border-radius:20px;padding:20px;margin-bottom:24px;backdrop-filter:blur(10px)}.video-frame[_ngcontent-%COMP%]{position:relative;overflow:visible;border-radius:12px;margin-bottom:16px;max-width:350px;margin-left:auto;margin-right:auto;aspect-ratio:9/16}.breathing-video[_ngcontent-%COMP%]{width:100%;height:100%;display:block;border-radius:12px;box-shadow:0 8px 32px #0000004d;background:#000;object-fit:cover;object-position:center top}@media (max-width: 768px){.video-frame[_ngcontent-%COMP%]{max-width:100%}.breathing-video[_ngcontent-%COMP%]{height:100%}.progress-container[_ngcontent-%COMP%]{width:calc(100% - 70px)}}.custom-controls[_ngcontent-%COMP%]{position:absolute;bottom:-25px;left:50%;transform:translate(-50%);display:flex;gap:20px;justify-content:center;align-items:center;padding:12px;background:#16a34acc;backdrop-filter:blur(10px);border-radius:12px;border:1px solid rgba(22,163,74,.9);z-index:10}.custom-controls.rtl[_ngcontent-%COMP%]{flex-direction:row-reverse}.control-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center}.control-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:56px;height:56px;background:#ffffff26;border:2px solid rgba(255,255,255,.3);border-radius:12px;cursor:pointer;transition:all .3s ease;color:#fff;backdrop-filter:blur(5px)}.control-btn[_ngcontent-%COMP%]:hover{background:#ffffff40;border-color:#ffffff80;transform:scale(1.05);box-shadow:0 4px 12px #0000004d}.control-btn[_ngcontent-%COMP%]:active{transform:scale(.95)}.control-btn[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}.tooltip[_ngcontent-%COMP%]{position:absolute;background:linear-gradient(135deg,#f97316,#ea580c);color:#fff;padding:8px 16px;border-radius:8px;font-size:.85rem;font-weight:500;white-space:nowrap;text-align:center;line-height:1.4;opacity:1;pointer-events:none;transition:opacity .3s ease;z-index:1000;box-shadow:0 4px 12px #f9731666;width:max-content;min-width:100px}.tooltip-left[_ngcontent-%COMP%]{bottom:-43px;right:-2px;transform:translateY(5px)}.tooltip-right[_ngcontent-%COMP%]{bottom:-43px;left:3px;transform:translateY(5px)}.tooltip-arrow[_ngcontent-%COMP%]{position:absolute;top:-6px;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid #F97316}.tooltip-left[_ngcontent-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{right:25px;left:auto}.tooltip-right[_ngcontent-%COMP%]   .tooltip-arrow[_ngcontent-%COMP%]{left:20px}[_ngcontent-%COMP%]:fullscreen   .progress-container[_ngcontent-%COMP%], [_ngcontent-%COMP%]:-webkit-full-screen   .progress-container[_ngcontent-%COMP%], [_ngcontent-%COMP%]:-moz-full-screen   .progress-container[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;z-index:10000;border-radius:0;background:#000c;backdrop-filter:blur(20px)}.progress-container[_ngcontent-%COMP%]{position:absolute;top:-30px;left:50%;transform:translate(-50%);background:#16a34acc;backdrop-filter:blur(20px);border-radius:16px;padding:12px;border:1px solid rgba(22,163,74,.9);z-index:10;width:calc(100% - 70px)}.progress-bar[_ngcontent-%COMP%]{width:100%;height:12px;background:#0000004d;border-radius:12px;overflow:hidden;position:relative;box-shadow:inset 0 2px 4px #0000004d}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#10b981,#34d399,#6ee7b7);border-radius:12px;transition:width .3s ease;box-shadow:0 0 10px #34d39980}.progress-text[_ngcontent-%COMP%]{margin-top:12px;text-align:center;color:#fff;font-size:.9rem;font-weight:600;text-shadow:0 2px 4px rgba(0,0,0,.3)}.congratulations-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#000000e6;display:flex;align-items:center;justify-content:center;z-index:10000;backdrop-filter:blur(10px)}.congratulations-card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b98133,#34d39933);backdrop-filter:blur(20px);border:2px solid rgba(52,211,153,.3);border-radius:24px;padding:48px;text-align:center;max-width:500px;box-shadow:0 20px 60px #0009;animation:_ngcontent-%COMP%_slideUp .5s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.congrats-icon[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:20px;animation:_ngcontent-%COMP%_bounce 1s ease infinite}@keyframes _ngcontent-%COMP%_bounce{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}.congratulations-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;margin:0 0 16px;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.5)}.congratulations-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#ffffffe6;margin:0 0 32px;line-height:1.6}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#34d399);color:#fff;border:none;border-radius:12px;padding:14px 32px;font-size:1rem;font-weight:700;cursor:pointer;transition:all .3s ease;box-shadow:0 4px 12px #10b98166}.btn-primary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #10b98199}.btn-primary[_ngcontent-%COMP%]:active{transform:translateY(0)}"]})}}return o})()}}]);