.content {
  padding: 4vw clamp(12px, 3vw, 24px) clamp(12px, 3vw, 24px);
  max-width: min(800px, 95vw);
  margin: 3vw auto 0;
  min-height: calc(100vh - 100px);
  width: 100%;
  box-sizing: border-box;
}

.game-container {
  width: 100%;
}

.phase-header {
  text-align: center;
  margin-top: 3vw;
  margin-bottom: clamp(16px, 4vw, 32px);
}

.phase-header h2 {
  font-size: 7vw;
  font-weight: 800;
  color: #fff;
  margin: 0 0 1.5vw;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.countdown {
  font-size: 4.5vw;
  color: rgba(255, 255, 255, 0.9);
  margin: 0;
  
  strong {
    color: #FFD700;
    font-size: 5.5vw;
  }
}

.instruction-text {
  text-align: center;
  font-size: 5.5vw;
  color: rgba(255, 255, 255, 0.8);
  margin: 2.5vw 0;
}

.pattern-grid {
  display: grid;
  gap: 1.5vw;
  width: 100%;
  max-width: min(400px, 85vw);
  margin: 0 auto clamp(20px, 4vw, 32px);
  padding: clamp(8px, 2.5vw, 16px);
  background: rgba(0, 0, 0, 0.3);
  border-radius: clamp(10px, 2.5vw, 16px);
  backdrop-filter: blur(10px);
  box-sizing: border-box;
}

.pattern-row {
  display: contents;
}

.pattern-cell {
  aspect-ratio: 1;
  width: 100%;
  min-height: 0;
  border-radius: clamp(6px, 1.5vw, 8px);
  border: clamp(2px, 0.5vw, 3px) solid rgba(255, 255, 255, 0.2);
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  cursor: pointer;
  box-sizing: border-box;
  
  &:hover:not(.drop-zone) {
    transform: scale(1.05);
    border-color: rgba(255, 255, 255, 0.4);
  }
}

.drop-zone {
  border: clamp(2px, 0.5vw, 3px) dashed rgba(255, 255, 255, 0.3);
  user-select: none;
  -webkit-user-select: none;
  pointer-events: auto;
  cursor: default;
  transition: border-color 0.1s ease, border-width 0.1s ease, box-shadow 0.1s ease;
  
  &.filled {
    border-style: solid;
    border-color: rgba(255, 255, 255, 0.4);
  }
  
  &.drag-over {
    border-color: #FFD700 !important;
    border-width: clamp(3px, 0.75vw, 4px) !important;
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.4) !important;
  }
}

.cell-number {
  font-size: 4.5vw;
  color: rgba(255, 255, 255, 0.4);
  font-weight: 700;
}

.remove-hint {
  font-size: 3.2vw;
  color: rgba(255, 255, 255, 0.6);
  text-align: center;
  padding: 0.75vw;
  display: none;
}

.drop-zone.filled:hover .remove-hint {
  display: block;
}

.user-grid-container {
  margin-bottom: clamp(32px, 5vw, 48px);
  
  .pattern-grid {
    max-width: min(320px, 72vw);
  }
  
  // Larger grid for 8-tile game (grand level)
  .pattern-grid.grid-4-col {
    max-width: min(420px, 82vw);
  }
}

.grid-label {
  text-align: center;
  font-size: 6vw;
  font-weight: 700;
  color: #fff;
  margin-bottom: 2.5vw;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.pieces-container {
  margin-top: clamp(24px, 4vw, 32px);
}

.pieces-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 2vw;
  justify-content: center;
  padding: clamp(16px, 3vw, 24px);
  background: rgba(0, 0, 0, 0.3);
  border-radius: clamp(12px, 2vw, 16px);
  backdrop-filter: blur(10px);
  pointer-events: auto;
}

.draggable-piece {
  width: clamp(40px, 11vw, 60px);
  height: clamp(40px, 11vw, 60px);
  min-width: 40px;
  min-height: 40px;
  flex-shrink: 0;
  border-radius: clamp(8px, 2vw, 12px);
  border: clamp(2px, 0.5vw, 3px) solid rgba(255, 255, 255, 0.3);
  cursor: grab;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -webkit-touch-callout: none;
  pointer-events: auto !important;
  touch-action: manipulation;
  box-sizing: border-box;
  
  // Smaller tiles for 4-tile game (beginner level)
  .pieces-grid.grid-2-col & {
    width: 14.5vw !important;
    height: 14.5vw !important;
    min-width: 0 !important;
    min-height: 0 !important;
  }
  
  &:hover {
    transform: scale(1.1) translateY(-4px);
    border-color: rgba(255, 255, 255, 0.6);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
  }
  
  &:active {
    cursor: grabbing !important;
    opacity: 0.8;
  }
  
  &.press-hold {
    animation: pressHold 0.1s ease-out forwards;
  }
  
  &[draggable="true"] {
    cursor: grab;
    
    &:hover {
      cursor: grab;
    }
    
    &:active {
      cursor: grabbing !important;
    }
  }
}

@keyframes pressHold {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.95);
    border-color: rgba(255, 215, 0, 0.8);
  }
  100% {
    transform: scale(1.05);
    border-color: #FFD700;
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
  }
}

.piece-hint {
  font-size: 3.2vw;
  color: rgba(255, 255, 255, 0.8);
  font-weight: 700;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

.completion-card {
  text-align: center;
  padding: 6vw 4vw;
  background: rgba(0, 0, 0, 0.4);
  border-radius: 4vw;
  backdrop-filter: blur(10px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  max-width: min(600px, 95vw);
  margin: 0 auto;
  box-sizing: border-box;
}

.completion-icon {
  font-size: 15vw;
  margin-bottom: 2.5vw;
}

.completion-card h2 {
  font-size: 8.5vw;
  font-weight: 800;
  color: #fff;
  margin: 0 0 2.5vw;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.success-message,
.error-message {
  font-size: 5vw;
  color: rgba(255, 255, 255, 0.9);
  margin: 0 0 5vw;
}

.error-message {
  color: #ff6b6b;
}

.score-display {
  display: flex;
  justify-content: center;
  gap: 5vw;
  margin: clamp(24px, 4vw, 32px) 0;
  padding: clamp(16px, 3vw, 24px);
  background: rgba(255, 255, 255, 0.1);
  border-radius: clamp(12px, 2vw, 16px);
  flex-wrap: wrap;
}

.score-item {
  display: flex;
  flex-direction: column;
  gap: 1vw;
}

.score-label {
  font-size: 5.5vw;
  color: rgba(255, 255, 255, 0.7);
}

.score-value {
  font-size: 7.5vw;
  font-weight: 800;
  color: #FFD700;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.button-group {
  display: flex;
  gap: 2.5vw;
  justify-content: center;
  margin-top: clamp(24px, 5vw, 32px);
  flex-wrap: wrap;
}

.btn-primary,
.btn-secondary {
  padding: 2.5vw 4vw;
  border: none;
  border-radius: 2vw;
  font-size: 4.5vw;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  min-width: 120px;
  flex: 1 1 auto;
  max-width: 300px;
  box-sizing: border-box;
}

.btn-primary {
  background: linear-gradient(135deg, #8B5CF6 0%, #6D28D9 100%);
  color: #fff;
  
  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(139, 92, 246, 0.5);
  }
}

.btn-secondary {
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
  border: 2px solid rgba(255, 255, 255, 0.3);
  
  &:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
  }
}

// Additional responsive adjustments for very small screens
@media (max-width: 480px) {
  .pattern-grid {
    max-width: 95vw;
    padding: 2vw;
    gap: 1vw;
  }
  
  .pattern-cell {
    min-height: 50px;
  }
  
  .draggable-piece {
    width: 18vw;
    height: 18vw;
    min-width: 50px;
    min-height: 50px;
  }
  
  .pieces-grid.grid-2-col .draggable-piece {
    width: 14.5vw !important;
    height: 14.5vw !important;
    min-width: 0 !important;
    min-height: 0 !important;
  }
  
  .score-display {
    flex-direction: column;
    gap: 20px;
  }
  
  .button-group {
    flex-direction: column;
    
    .btn-primary,
    .btn-secondary {
      width: 100%;
      max-width: 100%;
    }
  }
}

// Tablet and medium screens
@media (min-width: 481px) and (max-width: 768px) {
  .pattern-grid {
    max-width: min(350px, 80vw);
  }
  
  .draggable-piece {
    width: 9vw;
    height: 9vw;
  }
  
  .pieces-grid.grid-2-col .draggable-piece {
    width: 14.5vw !important;
    height: 14.5vw !important;
  }
}

// Landscape orientation adjustments for mobile
@media (max-width: 768px) and (orientation: landscape) {
  .phase-header {
    margin-bottom: 2vh;
  }
  
  .pattern-grid {
    max-width: min(300px, 50vw);
    margin-bottom: 2vh;
  }
  
  .user-grid-container {
    margin-bottom: 3vh;
  }
  
  .pieces-container {
    margin-top: 2vh;
  }
  
  .completion-card {
    padding: 3vh 2vw;
  }
}

// Very large screens
@media (min-width: 1200px) {
  .content {
    max-width: 900px;
  }
  
  .pattern-grid {
    max-width: 450px;
  }
  
  .draggable-piece {
    width: 60px;
    height: 60px;
  }
}

