<app-header [title]="'lets_begin'|t"></app-header>

<section class="content">
  <h3>{{'todays_activities'|t}}</h3>
  
  <div class="progress-bar">
    <div class="progress-bar__fill" [style.width.%]="todayProgress * 100"></div>
  </div>
  <div class="muted">{{ completedToday }} {{'exercises_completed'|t}} {{'out_of'|t}} {{ totalExercises }}</div>

  <!-- Music Session Box -->
  <div class="activity-box activity-box--1" [class.completed]="isMusicSessionCompleted">
    <div class="activity-header">
      <span class="icon">{{ isMusicSessionCompleted ? 'check_circle' : 'music_note' }}</span>
      <h3>{{'music_session'|t}}</h3>
    </div>
    <p>{{'music_session_description'|t}}</p>
    <button class="btn-activity" [class.btn-activity-completed]="isMusicSessionCompleted" (click)="startMusicSession()">
      <span class="icon">{{ isMusicSessionCompleted ? 'refresh' : 'play_arrow' }}</span>
      {{ isMusicSessionCompleted ? ('retake_music_session'|t) : ('start_music_session'|t) }}
    </button>
  </div>

  <!-- Breathing Exercise Box -->
  <div class="activity-box activity-box--2" [class.completed]="isBreathingExerciseCompleted">
    <div class="activity-header">
      <span class="icon">{{ isBreathingExerciseCompleted ? 'check_circle' : 'air' }}</span>
      <h3>{{'breathing_exercise'|t}}</h3>
    </div>
    <p>{{'exercise_breathing_description'|t}}</p>
    <button class="btn-activity" [class.btn-activity-completed]="isBreathingExerciseCompleted" (click)="startBreathingExercise()">
      <span class="icon">{{ isBreathingExerciseCompleted ? 'refresh' : 'play_arrow' }}</span>
      {{ isBreathingExerciseCompleted ? ('retake_breathing_exercise'|t) : ('start_breathing_exercise'|t) }}
    </button>
  </div>

  <!-- Feldenkrais Movement Box -->
  <div class="activity-box activity-box--3" [class.completed]="isFeldenkraisExerciseCompleted">
    <div class="activity-header">
      <span class="icon">{{ isFeldenkraisExerciseCompleted ? 'check_circle' : 'accessibility_new' }}</span>
      <h3>{{'feldenkrais_movement'|t}}</h3>
    </div>
    <p>{{'feldenkrais_description'|t}}</p>
    <button class="btn-activity" [class.btn-activity-completed]="isFeldenkraisExerciseCompleted" (click)="startFeldenkraisExercise()">
      <span class="icon">{{ isFeldenkraisExerciseCompleted ? 'refresh' : 'play_arrow' }}</span>
      {{ isFeldenkraisExerciseCompleted ? ('retake_feldenkrais_exercise'|t) : ('start_feldenkrais_exercise'|t) }}
    </button>
  </div>

  <!-- Game Box -->
  <div class="activity-box activity-box--4" [class.completed]="isMemoryGameCompleted">
    <div class="activity-header">
      <span class="icon">{{ isMemoryGameCompleted ? 'check_circle' : 'psychology' }}</span>
      <h3>{{'game'|t}}</h3>
    </div>
    <p>{{'game_description'|t}}</p>
    <button class="btn-activity" [class.btn-activity-completed]="isMemoryGameCompleted" (click)="startGame()">
      <span class="icon">{{ isMemoryGameCompleted ? 'refresh' : 'play_arrow' }}</span>
      {{ isMemoryGameCompleted ? ('retake_game'|t) : ('start_game'|t) }}
    </button>
  </div>

</section>

<!-- Congratulations Modal -->
<div class="congratulations-overlay" *ngIf="showCongratulationsModal" (click)="onCongratulationsOk()">
  <div class="congratulations-modal" (click)="$event.stopPropagation()">
    <div class="congratulations-icon">🎉</div>
    <h2>{{'congratulations'|t}}</h2>
    <p class="congratulations-message">{{'daily_routine_completed'|t}}</p>
    <button class="btn-primary" (click)="onCongratulationsOk()">
      {{'ok'|t}}
    </button>
  </div>
</div>
