"use strict";(self.webpackChunkbrain_power=self.webpackChunkbrain_power||[]).push([[8545],{8545:(w,_,s)=>{s.r(_),s.d(_,{GoalsComponent:()=>O});var r=s(4341),c=s(177),m=s(70),v=s(3025),b=s(9112),C=s(5964),t=s(4438),f=s(8490),M=s(5096);function G(l,d){if(1&l){const e=t.RV6();t.j41(0,"div",21)(1,"label",5)(2,"input",22),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG().$implicit;return t.DH7(i.done,n)||(i.done=n),t.Njj(n)}),t.bIt("change",function(){t.eBV(e);const n=t.XpG().$implicit,i=t.XpG();return t.Njj(i.toggleGoal(n))}),t.k0s(),t.j41(3,"span",7),t.EFF(4),t.k0s()(),t.j41(5,"div",23)(6,"button",24),t.nI1(7,"t"),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,i=t.XpG();return t.Njj(i.startEditingGoal(n))}),t.j41(8,"span",25),t.EFF(9,"edit"),t.k0s()(),t.j41(10,"button",26),t.nI1(11,"t"),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,i=t.XpG();return t.Njj(i.deleteGoal(n.id))}),t.j41(12,"span",25),t.EFF(13,"delete"),t.k0s()()()()}if(2&l){const e=t.XpG().$implicit;t.R7$(2),t.R50("ngModel",e.done),t.R7$(),t.AVh("completed",e.done),t.R7$(),t.SpI(" ",e.title," "),t.R7$(2),t.BMQ("aria-label",t.bMT(7,6,"edit")),t.R7$(4),t.BMQ("aria-label",t.bMT(11,8,"delete"))}}function y(l,d){if(1&l){const e=t.RV6();t.j41(0,"div",27)(1,"input",28),t.nI1(2,"t"),t.mxI("ngModelChange",function(n){t.eBV(e);const i=t.XpG(2);return t.DH7(i.editingGoalTitle,n)||(i.editingGoalTitle=n),t.Njj(n)}),t.bIt("keyup.enter",function(){t.eBV(e);const n=t.XpG().$implicit,i=t.XpG();return t.Njj(i.saveGoalEdit(n))})("keyup.escape",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.cancelEditingGoal())}),t.k0s(),t.j41(3,"div",29)(4,"button",30),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,i=t.XpG();return t.Njj(i.saveGoalEdit(n))}),t.EFF(5),t.nI1(6,"t"),t.k0s(),t.j41(7,"button",31),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.cancelEditingGoal())}),t.EFF(8),t.nI1(9,"t"),t.k0s()()()}if(2&l){const e=t.XpG(2);t.R7$(),t.R50("ngModel",e.editingGoalTitle),t.Y8G("placeholder",t.bMT(2,4,"enter_goal_name")),t.R7$(4),t.SpI(" ",t.bMT(6,6,"save")," "),t.R7$(3),t.SpI(" ",t.bMT(9,8,"cancel")," ")}}function P(l,d){if(1&l&&(t.j41(0,"div",32)(1,"small"),t.EFF(2),t.nI1(3,"t"),t.nI1(4,"date"),t.k0s()()),2&l){const e=t.XpG().$implicit;t.R7$(2),t.Lme("",t.bMT(3,2,"due"),": ",t.i5U(4,4,e.dueDate,"short"),"")}}function k(l,d){if(1&l&&(t.j41(0,"div",17),t.DNE(1,G,14,10,"div",18)(2,y,10,10,"div",19)(3,P,5,7,"div",20),t.k0s()),2&l){const e=d.$implicit,o=t.XpG();t.R7$(),t.Y8G("ngIf",!o.isEditing(e.id)),t.R7$(),t.Y8G("ngIf",o.isEditing(e.id)),t.R7$(),t.Y8G("ngIf",e.dueDate&&!o.isEditing(e.id))}}let O=(()=>{class l{constructor(e,o,n){this.dataService=e,this.router=o,this.translateService=n,this.goals=[],this.completedGoals=0,this.totalGoals=0,this.completionPercentage=0,this.isDailyRoutineCompleted=!1,this.editingGoalId=null,this.editingGoalTitle=""}ngOnInit(){this.loadGoals(),this.checkDailyRoutineCompletion(),this.routerSubscription=this.router.events.pipe((0,C.p)(e=>e instanceof m.wF)).subscribe(e=>{"/goals"===e.url&&(this.checkDailyRoutineCompletion(),this.updateProgress())})}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe()}loadGoals(){let e=this.dataService.getGoals();const o=this.translateService.t("goal_memory_game");this.goals=e.filter(a=>"2"!==a.id&&a.title!==o);const n=this.translateService.t("goal_family_call"),i=this.translateService.t("goal_breathing");this.goals=this.goals.map(a=>"1"===a.id?{...a,title:n}:"3"===a.id?{...a,title:i}:"Call a family member today"===a.title||"\u05d4\u05ea\u05e7\u05e9\u05e8 \u05dc\u05d1\u05df \u05de\u05e9\u05e4\u05d7\u05d4 \u05d4\u05d9\u05d5\u05dd"===a.title?{...a,title:n}:"5-minute breathing after breakfast"===a.title||"5 \u05d3\u05e7\u05d5\u05ea \u05e0\u05e9\u05d9\u05de\u05d4 \u05d0\u05d7\u05e8\u05d9 \u05d0\u05e8\u05d5\u05d7\u05ea \u05d1\u05d5\u05e7\u05e8"===a.title?{...a,title:i}:a),(e.length!==this.goals.length||JSON.stringify(e)!==JSON.stringify(this.goals))&&this.dataService.saveGoals(this.goals),this.updateProgress()}checkDailyRoutineCompletion(){const e=(new Date).toISOString().split("T")[0],n=localStorage.getItem("musicSessionCompleted")===e,a=localStorage.getItem("breathingSessionCompleted")===e,g=localStorage.getItem("feldenkraisSessionCompleted")===e,p=this.dataService.getTodayProgress().some(E=>"memory"===E.exerciseId);this.isDailyRoutineCompleted=n&&a&&g&&p,this.updateProgress()}toggleGoal(e){this.dataService.saveGoals(this.goals),this.updateProgress()}updateProgress(){const e=this.goals.filter(o=>o.done).length;this.completedGoals=e+(this.isDailyRoutineCompleted?1:0),this.totalGoals=this.goals.length+1,this.completionPercentage=this.totalGoals>0?Math.round(this.completedGoals/this.totalGoals*100):0}addNewGoal(){const e={id:Date.now().toString(),title:this.translateService.t("new_goal"),done:!1};this.goals.push(e),this.dataService.saveGoals(this.goals),this.updateProgress(),this.startEditingGoal(e)}startEditingGoal(e){this.editingGoalId=e.id,this.editingGoalTitle=e.title}saveGoalEdit(e){this.editingGoalTitle.trim()&&(e.title=this.editingGoalTitle.trim(),this.dataService.saveGoals(this.goals)),this.cancelEditingGoal()}cancelEditingGoal(){this.editingGoalId=null,this.editingGoalTitle=""}deleteGoal(e){this.goals=this.goals.filter(o=>o.id!==e),this.dataService.saveGoals(this.goals),this.updateProgress()}isEditing(e){return this.editingGoalId===e}static{this.\u0275fac=function(o){return new(o||l)(t.rXU(f.u),t.rXU(m.Ix),t.rXU(M.c))}}static{this.\u0275cmp=t.VBU({type:l,selectors:[["app-goals"]],standalone:!0,features:[t.aNF],decls:46,vars:37,consts:[[3,"title"],[1,"content"],[1,"goals-intro"],[1,"goals-list"],[1,"card","goal-item","goal-item--daily-routine"],[1,"goal-checkbox"],["type","checkbox",3,"click","checked","disabled"],[1,"goal-label"],["class","card goal-item",4,"ngFor","ngForOf"],[1,"progress-summary"],[1,"section-card"],[1,"progress-stats"],[1,"stat"],[1,"stat-number"],[1,"stat-label"],[1,"add-goal-section"],[1,"btn-primary",3,"click"],[1,"card","goal-item"],["class","goal-display",4,"ngIf"],["class","goal-edit",4,"ngIf"],["class","goal-due-date",4,"ngIf"],[1,"goal-display"],["type","checkbox",3,"ngModelChange","change","ngModel"],[1,"goal-actions"],[1,"btn-icon",3,"click"],[1,"icon"],[1,"btn-icon","btn-delete",3,"click"],[1,"goal-edit"],["type","text",1,"goal-edit-input",3,"ngModelChange","keyup.enter","keyup.escape","ngModel","placeholder"],[1,"goal-edit-actions"],[1,"btn-small","btn-primary",3,"click"],[1,"btn-small","btn-secondary",3,"click"],[1,"goal-due-date"]],template:function(o,n){1&o&&(t.nrm(0,"app-header",0),t.nI1(1,"t"),t.j41(2,"div",1)(3,"div",2)(4,"h2"),t.EFF(5),t.nI1(6,"t"),t.k0s(),t.j41(7,"p"),t.EFF(8),t.nI1(9,"t"),t.k0s()(),t.j41(10,"div",3)(11,"div",4)(12,"label",5)(13,"input",6),t.bIt("click",function(a){return a.preventDefault()}),t.k0s(),t.j41(14,"span",7),t.EFF(15),t.nI1(16,"t"),t.k0s()()(),t.DNE(17,k,4,3,"div",8),t.k0s(),t.j41(18,"div",9)(19,"div",10)(20,"h3"),t.EFF(21),t.nI1(22,"t"),t.k0s(),t.j41(23,"div",11)(24,"div",12)(25,"span",13),t.EFF(26),t.k0s(),t.j41(27,"span",14),t.EFF(28),t.nI1(29,"t"),t.k0s()(),t.j41(30,"div",12)(31,"span",13),t.EFF(32),t.k0s(),t.j41(33,"span",14),t.EFF(34),t.nI1(35,"t"),t.k0s()(),t.j41(36,"div",12)(37,"span",13),t.EFF(38),t.k0s(),t.j41(39,"span",14),t.EFF(40),t.nI1(41,"t"),t.k0s()()()()(),t.j41(42,"div",15)(43,"button",16),t.bIt("click",function(){return n.addNewGoal()}),t.EFF(44),t.nI1(45,"t"),t.k0s()()()),2&o&&(t.Y8G("title",t.bMT(1,19,"goals_challenges")),t.R7$(5),t.JRh(t.bMT(6,21,"your_daily_goals")),t.R7$(3),t.JRh(t.bMT(9,23,"track_progress")),t.R7$(3),t.AVh("completed",n.isDailyRoutineCompleted),t.R7$(2),t.Y8G("checked",n.isDailyRoutineCompleted)("disabled",!0),t.R7$(),t.AVh("completed",n.isDailyRoutineCompleted),t.R7$(),t.SpI(" ",t.bMT(16,25,"complete_daily_routine")," "),t.R7$(2),t.Y8G("ngForOf",n.goals),t.R7$(4),t.JRh(t.bMT(22,27,"todays_progress")),t.R7$(5),t.JRh(n.completedGoals),t.R7$(2),t.JRh(t.bMT(29,29,"completed")),t.R7$(4),t.JRh(n.totalGoals),t.R7$(2),t.JRh(t.bMT(35,31,"total_goals")),t.R7$(4),t.SpI("",n.completionPercentage,"%"),t.R7$(2),t.JRh(t.bMT(41,33,"complete")),t.R7$(4),t.SpI(" ",t.bMT(45,35,"add_new_goal")," "))},dependencies:[v.y,r.YN,r.me,r.Zm,r.BC,r.vS,c.MD,c.Sq,c.bT,c.vh,b.Z],styles:[".goals-intro[_ngcontent-%COMP%]{margin-bottom:4vw}.goals-intro[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:6.4vw;margin:0 0 1.6vw;font-weight:800;text-transform:none;line-height:1.3}.goals-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:4.27vw;line-height:1.5}.goals-list[_ngcontent-%COMP%]{margin-bottom:4vw}.goal-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:2.67vw;padding:3.2vw 3.73vw!important}.goal-display[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:2.67vw;width:100%}.goal-display[_ngcontent-%COMP%]   .goal-checkbox[_ngcontent-%COMP%]{flex:1;min-width:0}.goal-actions[_ngcontent-%COMP%]{display:flex;gap:1.33vw;flex-shrink:0}.btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:1.33vw;cursor:pointer;display:flex;align-items:center;justify-content:center;border-radius:1.33vw;transition:background-color .2s}.btn-icon[_ngcontent-%COMP%]:hover{background-color:#0000000d}.btn-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:5.33vw;color:#666}.btn-icon.btn-delete[_ngcontent-%COMP%]:hover{background-color:#ef44441a}.btn-icon.btn-delete[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:#ef4444}.goal-edit[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2.67vw;width:100%}.goal-edit-input[_ngcontent-%COMP%]{width:100%;padding:2.67vw 3.2vw;font-size:4.27vw;border:2px solid #e5e7eb;border-radius:2.13vw;transition:border-color .2s}.goal-edit-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary)}.goal-edit-actions[_ngcontent-%COMP%]{display:flex;gap:2.13vw}.btn-small[_ngcontent-%COMP%]{padding:2.13vw 3.73vw;font-size:3.73vw;border-radius:2.13vw;border:none;cursor:pointer;font-weight:600;transition:all .2s;flex:1}.btn-small.btn-primary[_ngcontent-%COMP%]{background:var(--primary);color:#fff}.btn-small.btn-primary[_ngcontent-%COMP%]:hover{background:var(--primary-dark)}.btn-small.btn-secondary[_ngcontent-%COMP%]{background:#e5e7eb;color:#374151}.btn-small.btn-secondary[_ngcontent-%COMP%]:hover{background:#d1d5db}.goal-item--daily-routine[_ngcontent-%COMP%]{background:#d977061a!important;border:2px solid rgba(217,119,6,.3)!important}.goal-item--daily-routine.completed[_ngcontent-%COMP%]{background:#16a34a26!important;border-color:#16a34a66!important}.goal-checkbox[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:2.67vw;cursor:pointer}.goal-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:5.33vw;height:5.33vw;margin-top:.53vw;cursor:pointer;flex-shrink:0}.goal-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.7}.goal-label[_ngcontent-%COMP%]{flex:1;font-size:4.27vw;line-height:1.5;color:#333;word-wrap:break-word}.goal-label.completed[_ngcontent-%COMP%]{text-decoration:line-through;opacity:.6}.goal-due-date[_ngcontent-%COMP%]{margin-left:7.47vw;color:#666;font-size:3.47vw;margin-top:1.07vw}.progress-summary[_ngcontent-%COMP%]{margin-bottom:4vw}.progress-summary[_ngcontent-%COMP%]   .section-card[_ngcontent-%COMP%]{padding:3.2vw 3.73vw!important}.progress-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:4.8vw;margin:0 0 2.67vw;font-weight:700;text-transform:none;line-height:1.3}.progress-stats[_ngcontent-%COMP%]{display:flex;justify-content:space-around;text-align:center;gap:2.13vw}.stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.stat-number[_ngcontent-%COMP%]{font-size:7.47vw;font-weight:800;color:var(--primary);line-height:1.2}.stat-label[_ngcontent-%COMP%]{font-size:3.73vw;color:#666;margin-top:1.07vw;line-height:1.4}.add-goal-section[_ngcontent-%COMP%]{margin-top:4vw}.add-goal-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{font-size:4.27vw;padding:3.73vw 5.33vw;min-height:12.8vw;line-height:1.4}"]})}}return l})()}}]);