"use strict";(self.webpackChunkbrain_power=self.webpackChunkbrain_power||[]).push([[8545],{8545:(E,p,i)=>{i.r(p),i.d(p,{GoalsComponent:()=>O});var r=i(4341),c=i(177),m=i(70),v=i(3025),C=i(9112),f=i(5964),t=i(4438),M=i(8490),P=i(5096);function b(s,h){if(1&s&&(t.j41(0,"div",20)(1,"small"),t.EFF(2),t.nI1(3,"t"),t.nI1(4,"date"),t.k0s()()),2&s){const e=t.XpG().$implicit;t.R7$(2),t.Lme("",t.bMT(3,2,"due"),": ",t.i5U(4,4,e.dueDate,"short"),"")}}function y(s,h){if(1&s){const e=t.RV6();t.j41(0,"div",17)(1,"label",5)(2,"input",18),t.mxI("ngModelChange",function(o){const l=t.eBV(e).$implicit;return t.DH7(l.done,o)||(l.done=o),t.Njj(o)}),t.bIt("change",function(){const o=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.toggleGoal(o))}),t.k0s(),t.j41(3,"span",7),t.EFF(4),t.k0s()(),t.DNE(5,b,5,7,"div",19),t.k0s()}if(2&s){const e=h.$implicit;t.R7$(2),t.R50("ngModel",e.done),t.R7$(),t.AVh("completed",e.done),t.R7$(),t.SpI(" ",e.title," "),t.R7$(),t.Y8G("ngIf",e.dueDate)}}let O=(()=>{class s{constructor(e,a,o){this.dataService=e,this.router=a,this.translateService=o,this.goals=[],this.completedGoals=0,this.totalGoals=0,this.completionPercentage=0,this.isDailyRoutineCompleted=!1}ngOnInit(){this.loadGoals(),this.checkDailyRoutineCompletion(),this.routerSubscription=this.router.events.pipe((0,f.p)(e=>e instanceof m.wF)).subscribe(e=>{"/goals"===e.url&&(this.checkDailyRoutineCompletion(),this.updateProgress())})}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe()}loadGoals(){let e=this.dataService.getGoals();const a=this.translateService.t("goal_memory_game");this.goals=e.filter(n=>"2"!==n.id&&n.title!==a);const o=this.translateService.t("goal_family_call"),l=this.translateService.t("goal_breathing");this.goals=this.goals.map(n=>"1"===n.id?{...n,title:o}:"3"===n.id?{...n,title:l}:"Call a family member today"===n.title||"\u05d4\u05ea\u05e7\u05e9\u05e8 \u05dc\u05d1\u05df \u05de\u05e9\u05e4\u05d7\u05d4 \u05d4\u05d9\u05d5\u05dd"===n.title?{...n,title:o}:"5-minute breathing after breakfast"===n.title||"5 \u05d3\u05e7\u05d5\u05ea \u05e0\u05e9\u05d9\u05de\u05d4 \u05d0\u05d7\u05e8\u05d9 \u05d0\u05e8\u05d5\u05d7\u05ea \u05d1\u05d5\u05e7\u05e8"===n.title?{...n,title:l}:n),(e.length!==this.goals.length||JSON.stringify(e)!==JSON.stringify(this.goals))&&this.dataService.saveGoals(this.goals),this.updateProgress()}checkDailyRoutineCompletion(){const e=(new Date).toISOString().split("T")[0],o=localStorage.getItem("musicSessionCompleted")===e,n=localStorage.getItem("breathingSessionCompleted")===e,g=localStorage.getItem("feldenkraisSessionCompleted")===e,d=this.dataService.getTodayProgress().some(R=>"memory"===R.exerciseId);this.isDailyRoutineCompleted=o&&n&&g&&d,this.updateProgress()}toggleGoal(e){this.dataService.saveGoals(this.goals),this.updateProgress()}updateProgress(){const e=this.goals.filter(a=>a.done).length;this.completedGoals=e+(this.isDailyRoutineCompleted?1:0),this.totalGoals=this.goals.length+1,this.completionPercentage=this.totalGoals>0?Math.round(this.completedGoals/this.totalGoals*100):0}addNewGoal(){const e={id:Date.now().toString(),title:this.translateService.t("new_goal"),done:!1};this.goals.push(e),this.dataService.saveGoals(this.goals),this.updateProgress()}static{this.\u0275fac=function(a){return new(a||s)(t.rXU(M.u),t.rXU(m.Ix),t.rXU(P.c))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-goals"]],standalone:!0,features:[t.aNF],decls:46,vars:37,consts:[[3,"title"],[1,"content"],[1,"goals-intro"],[1,"goals-list"],[1,"card","goal-item","goal-item--daily-routine"],[1,"goal-checkbox"],["type","checkbox",3,"click","checked","disabled"],[1,"goal-label"],["class","card goal-item",4,"ngFor","ngForOf"],[1,"progress-summary"],[1,"section-card"],[1,"progress-stats"],[1,"stat"],[1,"stat-number"],[1,"stat-label"],[1,"add-goal-section"],[1,"btn-primary",3,"click"],[1,"card","goal-item"],["type","checkbox",3,"ngModelChange","change","ngModel"],["class","goal-due-date",4,"ngIf"],[1,"goal-due-date"]],template:function(a,o){1&a&&(t.nrm(0,"app-header",0),t.nI1(1,"t"),t.j41(2,"div",1)(3,"div",2)(4,"h2"),t.EFF(5),t.nI1(6,"t"),t.k0s(),t.j41(7,"p"),t.EFF(8),t.nI1(9,"t"),t.k0s()(),t.j41(10,"div",3)(11,"div",4)(12,"label",5)(13,"input",6),t.bIt("click",function(n){return n.preventDefault()}),t.k0s(),t.j41(14,"span",7),t.EFF(15),t.nI1(16,"t"),t.k0s()()(),t.DNE(17,y,6,5,"div",8),t.k0s(),t.j41(18,"div",9)(19,"div",10)(20,"h3"),t.EFF(21),t.nI1(22,"t"),t.k0s(),t.j41(23,"div",11)(24,"div",12)(25,"span",13),t.EFF(26),t.k0s(),t.j41(27,"span",14),t.EFF(28),t.nI1(29,"t"),t.k0s()(),t.j41(30,"div",12)(31,"span",13),t.EFF(32),t.k0s(),t.j41(33,"span",14),t.EFF(34),t.nI1(35,"t"),t.k0s()(),t.j41(36,"div",12)(37,"span",13),t.EFF(38),t.k0s(),t.j41(39,"span",14),t.EFF(40),t.nI1(41,"t"),t.k0s()()()()(),t.j41(42,"div",15)(43,"button",16),t.bIt("click",function(){return o.addNewGoal()}),t.EFF(44),t.nI1(45,"t"),t.k0s()()()),2&a&&(t.Y8G("title",t.bMT(1,19,"goals_challenges")),t.R7$(5),t.JRh(t.bMT(6,21,"your_daily_goals")),t.R7$(3),t.JRh(t.bMT(9,23,"track_progress")),t.R7$(3),t.AVh("completed",o.isDailyRoutineCompleted),t.R7$(2),t.Y8G("checked",o.isDailyRoutineCompleted)("disabled",!0),t.R7$(),t.AVh("completed",o.isDailyRoutineCompleted),t.R7$(),t.SpI(" ",t.bMT(16,25,"complete_daily_routine")," "),t.R7$(2),t.Y8G("ngForOf",o.goals),t.R7$(4),t.JRh(t.bMT(22,27,"todays_progress")),t.R7$(5),t.JRh(o.completedGoals),t.R7$(2),t.JRh(t.bMT(29,29,"completed")),t.R7$(4),t.JRh(o.totalGoals),t.R7$(2),t.JRh(t.bMT(35,31,"total_goals")),t.R7$(4),t.SpI("",o.completionPercentage,"%"),t.R7$(2),t.JRh(t.bMT(41,33,"complete")),t.R7$(4),t.SpI(" ",t.bMT(45,35,"add_new_goal")," "))},dependencies:[v.y,r.YN,r.Zm,r.BC,r.vS,c.MD,c.Sq,c.bT,c.vh,C.Z],styles:[".goals-intro[_ngcontent-%COMP%]{margin-bottom:4vw}.goals-intro[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:6.4vw;margin:0 0 1.6vw;font-weight:800;text-transform:none;line-height:1.3}.goals-intro[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:4.27vw;line-height:1.5}.goals-list[_ngcontent-%COMP%]{margin-bottom:4vw}.goal-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:2.67vw;padding:3.2vw 3.73vw!important}.goal-item--daily-routine[_ngcontent-%COMP%]{background:#d977061a!important;border:2px solid rgba(217,119,6,.3)!important}.goal-item--daily-routine.completed[_ngcontent-%COMP%]{background:#16a34a26!important;border-color:#16a34a66!important}.goal-checkbox[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:2.67vw;cursor:pointer}.goal-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:5.33vw;height:5.33vw;margin-top:.53vw;cursor:pointer;flex-shrink:0}.goal-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled{cursor:not-allowed;opacity:.7}.goal-label[_ngcontent-%COMP%]{flex:1;font-size:4.27vw;line-height:1.5;color:#333;word-wrap:break-word}.goal-label.completed[_ngcontent-%COMP%]{text-decoration:line-through;opacity:.6}.goal-due-date[_ngcontent-%COMP%]{margin-left:7.47vw;color:#666;font-size:3.47vw;margin-top:1.07vw}.progress-summary[_ngcontent-%COMP%]{margin-bottom:4vw}.progress-summary[_ngcontent-%COMP%]   .section-card[_ngcontent-%COMP%]{padding:3.2vw 3.73vw!important}.progress-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:4.8vw;margin:0 0 2.67vw;font-weight:700;text-transform:none;line-height:1.3}.progress-stats[_ngcontent-%COMP%]{display:flex;justify-content:space-around;text-align:center;gap:2.13vw}.stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.stat-number[_ngcontent-%COMP%]{font-size:7.47vw;font-weight:800;color:var(--primary);line-height:1.2}.stat-label[_ngcontent-%COMP%]{font-size:3.73vw;color:#666;margin-top:1.07vw;line-height:1.4}.add-goal-section[_ngcontent-%COMP%]{margin-top:4vw}.add-goal-section[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{font-size:4.27vw;padding:3.73vw 5.33vw;min-height:12.8vw;line-height:1.4}"]})}}return s})()}}]);